@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Http
@using RetreatSchedule.Util

@inject UserManager<IdentityUser> UserManager

@{ var currentUser = Context.Session.Get<RetreatSchedule.Models.User>(Constants.SessionKeyUser); }
<div id="sidebar" class="sidebar">
    <!-- begin sidebar scrollbar -->
    <div data-scrollbar="true" data-height="100%">
        <!-- begin sidebar user -->
        <ul class="nav">
            <li class="nav-profile">
                <a href="javascript:;" data-toggle="nav-profile">
                    <div class="image">
                        <img src="@(currentUser?.ProfilePicture ?? "/assets/img/avatar.png")" onerror="src='/assets/img/avatar.png'" alt="I" />
                    </div>
                    <div class="info">
                        <b class="caret pull-right"></b>
                        @currentUser?.FirstName @currentUser?.LastName
                        <small>@UserManager.GetUserName(User)</small>
                    </div>
                </a>
            </li>
            <li>
                <ul class="nav nav-profile">
                    <li><a asp-area="Identity" asp-page="/Account/Manage/Index"><i class="fa fa-pencil-alt"></i> Edit Profile</a></li>
                </ul>
            </li>
        </ul>
        <!-- end sidebar user -->
        <!-- begin sidebar nav -->
        <ul class="nav">
            <li class="nav-header">Navigation</li>
            <li class="@(((string)ViewData["Title"]).IndexOf("Dashboard") != -1 ? "active" : "")">
                <a asp-controller="Dashboard" asp-action="Index">
                    <i class="fa fa-chart-bar"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="@(((string)ViewData["Title"]).IndexOf("Booking") != -1 ? "active" : "")">
                <a asp-controller="Bookings" asp-action="Index">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Bookings</span>
                </a>
            </li>
            <li class="@(((string)ViewData["Title"]).IndexOf("User") != -1 ? "active" : "")">
                <a asp-controller="Users" asp-action="Index">
                    <i class="fas fa-users-cog"></i>
                    <span>Users</span>
                </a>
            </li>
            <li class="@(((string)ViewData["Title"]).IndexOf("Activit") != -1 ? "active" : "")">
                <a asp-controller="Activities" asp-action="Index">
                    <i class="fas fa-yin-yang"></i>
                    <span>Activities</span>
                </a>
            </li>
            <li class="@(((string)ViewData["Title"]).IndexOf("Venue") != -1 ? "active" : "")">
                <a asp-controller="Locations" asp-action="Index">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Venues</span>
                </a>
            </li>
            <li class="@(((string)ViewData["Title"]).IndexOf("Setting") != -1 ? "active" : "")">
                <a asp-controller="Settings" asp-action="Index">
                    <i class="fas fa-cogs"></i>
                    <span>Settings</span>
                </a>
            </li>

            <!-- begin sidebar minify button -->
            <li><a href="javascript:;" class="sidebar-minify-btn" data-click="sidebar-minify"><i class="fa fa-angle-double-left"></i></a></li>
            <!-- end sidebar minify button -->
        </ul>
        <!-- end sidebar nav -->
    </div>
    <!-- end sidebar scrollbar -->
</div>
<div class="sidebar-bg"></div>
